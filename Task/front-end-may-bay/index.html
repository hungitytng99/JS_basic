<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="dropdown">

        <button id="btn-select-num-people" onclick="showOption()">
            <h3 class="num-people-total">
                <p class="total-people ">1</p>
                <p>khách</p>
            </h3>
            <div class="row">
                <p class="num-aldult">1</p>
                <p> người lớn,</p>
                <p class="num-kids">0</p>
                <p> trẻ em,</p>
                <p class="num-baby">0</p>
                <p> em bé</p>
            </div>


        </button>

        <div id="dropdown-id" class="dropdown-content">
            <table id="num_people_regis">
                <tr>
                    <td>
                        <p class="num-aldult">1</p>
                    </td>
                    <td width="60%">
                        <div>Người lớn</div>
                        <div class="text-detail-people">(Từ 12 tuổi)</div>
                    </td>
                    <td colspan="4">
                        <button onclick="decreaseCount('num-aldult')">-</button>
                        <button onclick="increaseCount('num-aldult')">+</button>
                    </td>
                </tr>

                <tr>
                    <td>
                        <p class="num-kids">0</p>
                    </td>
                    <td width="60%">
                        <div>Người lớn</div>
                        <div class="text-detail-people">(Từ 12 tuổi)</div>
                    </td>
                    <td colspan="4">
                        <button onclick="decreaseCount('num-kids')">-</button>
                        <button onclick="increaseCount('num-kids')">+</button>
                    </td>
                </tr>

                <tr>
                    <td>
                        <p class="num-baby">0</p>
                    </td>
                    <td width="60%">
                        <div>Người lớn</div>
                        <div class="text-detail-people">(Từ 12 tuổi)</div>
                    </td>
                    <td colspan="4">
                        <button onclick="decreaseCount('num-baby')">-</button>
                        <button onclick="increaseCount('num-baby')">+</button>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</body>

<script>
    var dropdowncontent = document.getElementById('dropdown-id');

    dropdowncontent.onblur = function() {
        console.log("off");
    }

    document.onclick = function(e) {
        console.log(e);
        // var dropdownmenu = document.getElementById('dropdown-id');
        // if (!dropdownmenu.is(e.target) && dropdownmenu.hasAttribute(e.target).length === 0) {
        //     console.log("off");
        // }



        // var isDropdownClicked = false;
        // var dropdownmenuclass = dropdownmenu.classList;
        // dropdownmenu.onclick = function() {
        //     isDropdownClicked = true;
        // }
        // Promise.all([dropdownmenu.onclick])
        //     .then(() => {
        //         if (dropdownmenuclass.contains('is-dropdown') && !isDropdownClicked) {
        //             console.log('off');
        //             console.log(isDropdownClicked);
        //         };
        //     })

    }

    function showOption() {
        dropdowncontent.classList.toggle('is-dropdown');
    }

    function increaseCount(classname) {
        var currentNumOfPeople = document.getElementsByClassName(classname);
        for (var i = 0; i < currentNumOfPeople.length; i++) {
            currentNumOfPeople[i].innerHTML++;
        }
        computeTotalPeople('total-people', 'in');
        //document.getElementsByClassName(classname).innerHTML = currentNumOfPeople;
    }

    function decreaseCount(classname) {
        var currentNumOfPeople = document.getElementsByClassName(classname);
        var isDecrease = false;
        for (var i = 0; i < currentNumOfPeople.length; i++) {
            if (classname === 'num-aldult' && currentNumOfPeople[i].innerHTML <= 1) break;
            if (currentNumOfPeople[i].innerHTML > 0) {
                currentNumOfPeople[i].innerHTML--;
                isDecrease = true;
            }
        }
        if (isDecrease) computeTotalPeople('total-people', 'de');
    }

    function computeTotalPeople(classname, operator) {
        var total = document.getElementsByClassName(classname);
        if (operator === 'in') total[0].innerHTML++;
        else if (operator === 'de') total[0].innerHTML--;
    }
</script>

</html>